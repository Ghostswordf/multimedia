<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.2/shaka-player.ui.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.2/controls.min.css">
</head>
<body>
  <h2>AVC Adaptive Streaming</h2>
  <div data-shaka-player-container style="max-width:40em">
    <video data-shaka-player autoplay id="video" style="width:100%"></video>
  </div>

  <script>
    console.log('Secure context?', window.isSecureContext);
    console.log('MSE supported?', !!window.MediaSource);
    
    const manifestUri = 'https://raw.githubusercontent.com/Ghostswordf/multimedia/main/manifestlab4.mpd';
    
    shaka.polyfill.installAll();
    
    console.log('Shaka browser support:', shaka.Player.isBrowserSupported());
    console.log('Detailed support:', shaka.Player.probeSupport());
    
    if (shaka.Player.isBrowserSupported()) {
      // Your original code here
      document.addEventListener('shaka-ui-loaded', async () => {
        const video = document.getElementById('video');
        const player = video.ui.getControls().getPlayer();
        try {
          await player.load(manifestUri);
          console.log('Loaded!');
        } catch(e) {
          console.error(e);
        }
      });
    } else {
      document.body.innerHTML += '<p style="color:red">Browser not supported! Use Chrome/Firefox latest or serve via localhost.</p>';
    }
  </script>
</body>
</html>
